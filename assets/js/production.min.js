!function(e){function t(c){if(n[c])return n[c].exports;var i=n[c]={exports:{},id:c,loaded:!1};return e[c].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n=window.ga||function(){},c=(window.Hammer||function(){},function(e,t,n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3);var i="expires="+c.toUTCString();document.cookie=e+"="+t+"; "+i+"; path=/"}),i=function(e){for(var t=e+"=",n=document.cookie.split(";"),c=0;c<n.length;c++){for(var i=n[c];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},r=function(){return window.matchMedia("(min-width: 768px)").matches},o=function(e,t,n){for(var c=0;c<e.length;c++)t.call(n,c,e[c])},s=function(e){var t=e.querySelector(".js-comic-wrapper-zoom"),s=e.querySelector(".js-comic-wrapper-position"),u=e.querySelectorAll(".js-comic-page"),l=document.querySelectorAll(".js-comic-prev-link"),a=document.querySelectorAll(".js-comic-next-link"),d=(document.querySelectorAll(".js-comic-prev-page"),document.querySelectorAll(".js-comic-next-page"),document.querySelectorAll(".js-comic-prev-issue"),document.querySelectorAll(".js-comic-next-issue"),document.querySelector(".js-comic-toggle-dynamic-views")),m=document.querySelector(".js-comic-toggle-fullscreen"),g=document.querySelector(".js-comic-current-page"),f=document.querySelectorAll(".js-comic-page-image"),h=[],w={active:!1,dynamicViews:!1,fullscreen:!1,width:0,height:0,pageWidth:0,pageHeight:0,nextLink:"#",prevLink:"#",currentPageId:1,currentViewId:1,images:{}},v=[],y=[],p=0,I=function(){w.width=e.offsetWidth,w.height=e.offsetHeight,w.pageWidth=u[w.currentPageId-1].offsetWidth,w.pageHeight=u[w.currentPageId-1].offsetHeight},k=function(){var e=window.location.hash.substring(1).split("-"),t=Number(e[0])||1,n=Number(e[1])||1,c=!1;h&&(h[t-1]||(t=h.length,c=!0),h[t-1].views[n-1]||(n=h[t-1].views.length,c=!0)),c?window.location.hash="#"+t+"-"+n:S(t,n)},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.currentPageId,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.currentViewId;w.currentPageId!==e&&(L(),n("send","event","Comic","page",e)),w.currentPageId=e,w.currentViewId=t,v=h[w.currentPageId-1].views,y=v[w.currentViewId-1],p=v.length,q(),b(),x(w.currentPageId+1),x(w.currentPageId-1)},x=function(e){var t=w.images[e];t&&(w.images[e].node.src=w.images[e].src,w.images[e].node.removeAttribute("data-src"),delete w.images[e])},q=function(){var e="#1-1",t="#"+h.length+"-"+h[h.length-1].views.length;if(w.currentPageId>1||w.currentViewId>1){var n=w.currentPageId,c=w.currentViewId-1;1===w.currentViewId&&(n=w.currentPageId-1,c=h[n-1].views.length),w.dynamicViews||(n=w.currentPageId-1,c=1),e="#"+n+"-"+c,o(l,function(e,t){t.classList.remove("is-disabled")})}else o(l,function(e,t){t.classList.add("is-disabled")});if(w.currentPageId!==h.length||(!w.dynamicViews||w.currentViewId!==h[h.length-1].views.length)&&w.dynamicViews){var i=w.currentPageId,r=w.currentViewId+1;w.currentViewId!==p&&w.dynamicViews||(i=w.currentPageId+1,r=1),t="#"+i+"-"+r,o(a,function(e,t){t.classList.remove("is-disabled")})}else o(a,function(e,t){t.classList.add("is-disabled")});w.prevLink=e,w.nextLink=t,o(a,function(e,t){t.href=w.nextLink}),o(l,function(e,t){t.href=w.prevLink}),g.innerText=w.currentPageId},b=function(){if(w.dynamicViews){var e={x:Math.round((w.pageWidth-y.width)/2)-y.left,y:Math.round((w.pageHeight-y.height)/2)-y.top},n=Math.min(w.width/(y.width+20),2),c=Math.min(w.height/(y.height+20),2),i=n>c?c:n;s.style.msTransform="-ms-translate("+e.x+"px, "+e.y+"px, 0)",s.style.transform="translate3d("+e.x+"px, "+e.y+"px, 0)",t.style.transform="scale("+i+", "+i+")"}for(var r=0;r<u.length;r++){var o=u[r],l=r+1===w.currentPageId?"block":"none";o.style.display=l}},L=function(){document.body.scrollTop=document.querySelector("#comic").offsetTop-20},V=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!w.dynamicViews;w.dynamicViews=i,w.dynamicViews?(d.classList.add("is-active"),e.classList.add("c-comic--theater"),c("dynamicViewsState",1)):(s.removeAttribute("style"),t.removeAttribute("style"),d.classList.remove("is-active"),e.classList.remove("c-comic--theater"),c("dynamicViewsState",0)),I(),S(),n&&r()&&n("send","event","UX","dynamicViews",w.dynamicViews)},F=function(e){e.preventDefault(),k()},P=function(){Modernizr.fullscreen&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),w.fullscreen=!w.fullscreen,n&&n("send","event","UX","fullscreen",w.fullscreen))},j=function(){var e=37,t=39,n=32;document.body.onkeydown=function(c){c.keyCode===e?(c.preventDefault(),l&&l[0].click()):c.keyCode!==t&&c.keyCode!==n||(c.preventDefault(),a&&a[0].click())}},A=function(){e&&(I(),h=comicData,o(f,function(e,t){var n=t.getAttribute("data-src");w.images[e+1]={src:n,node:t}}),k(),x(w.currentPageId),j(),d.addEventListener("click",function(e){V()},!1),Modernizr.fullscreen&&m.addEventListener("click",function(){V(!1),P()},!1),window.addEventListener("hashchange",F,!1),window.addEventListener("resize",function(){I(),b()},!1),"1"!=i("dynamicViewsState")&&r()||V(!0),window.requestAnimationFrame(function(){w.active=!0,e.classList.remove("is-loading")}))};return{state:w,init:A}},u=document.querySelector(".js-comic");u&&(window.mainComic=s(u),mainComic.init());var l=document.querySelector(".js-share-facebook");l&&document.querySelector(".js-share-facebook").addEventListener("click",function(){FB.ui({method:"share",href:URL},function(e){}),n&&n("send","event","Social","facebook")});var a=document.querySelector(".js-share-twitter");a&&a.addEventListener("click",function(){n&&n("send","event","Social","twitter")})}]);