!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";!function(e){var t=function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+r+"; path=/"},n=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i+1){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""},i=function(){return window.matchMedia("(min-width: 768px)").matches},r=function(e,t,n){for(var i=0;i<e.length;i+1)t.call(n,i,e[i])},c=function(c){var s=c.querySelector(".js-comic-wrapper-zoom"),o=c.querySelector(".js-comic-wrapper-position"),a=c.querySelectorAll(".js-comic-page"),u=document.querySelectorAll(".js-comic-prev-link"),l=document.querySelectorAll(".js-comic-next-link"),d=document.querySelector(".js-comic-toggle-dynamic-views"),m=document.querySelector(".js-comic-toggle-fullscreen"),g=document.querySelector(".js-comic-current-page"),f=document.querySelectorAll(".js-comic-page-image"),h=[],w={active:!1,dynamicViews:!1,fullscreen:!1,width:0,height:0,pageWidth:0,pageHeight:0,nextLink:"#",prevLink:"#",currentPageId:1,currentViewId:1,images:{}},v=[],p=[],y=0,k=function(){e("html, body").animate({scrollTop:e("#comic").offset().top-20},300)},I=function(){w.width=c.offsetWidth,w.height=c.offsetHeight,w.pageWidth=a[w.currentPageId-1].offsetWidth,w.pageHeight=a[w.currentPageId-1].offsetHeight},x=function(){var e="#1-1",t="#"+h.length+"-"+h[h.length-1].views.length;if(w.currentPageId>1||w.currentViewId>1){var n=w.currentPageId,i=w.currentViewId-1;1===w.currentViewId&&(n=w.currentPageId-1,i=h[n-1].views.length),w.dynamicViews||(n=w.currentPageId-1,i=1),e="#"+n+"-"+i,r(u,function(e,t){t.classList.remove("is-disabled")})}else r(u,function(e,t){t.classList.add("is-disabled")});if(w.currentPageId!==h.length||(!w.dynamicViews||w.currentViewId!==h[h.length-1].views.length)&&w.dynamicViews){var c=w.currentPageId,s=w.currentViewId+1;w.currentViewId!==y&&w.dynamicViews||(c=w.currentPageId+1,s=1),t="#"+c+"-"+s,r(l,function(e,t){t.classList.remove("is-disabled")})}else r(l,function(e,t){t.classList.add("is-disabled")});w.prevLink=e,w.nextLink=t,r(l,function(e,t){t.setAttribute("href",w.nextLink)}),r(u,function(e,t){t.setAttribute("href",w.prevLink)}),g.innerText=w.currentPageId},b=function(e){var t=w.images[e];t&&(w.images[e].node.src=w.images[e].src,w.images[e].node.removeAttribute("data-src"),delete w.images[e])},L=function(){if(w.dynamicViews){var e={x:Math.round((w.pageWidth-p.width)/2)-p.left,y:Math.round((w.pageHeight-p.height)/2)-p.top},t=Math.min(w.width/(p.width+20),2),n=Math.min(w.height/(p.height+20),2),i=t>n?n:t;o.style.msTransform="-ms-translate("+e.x+"px, "+e.y+"px, 0)",o.style.transform="translate3d("+e.x+"px, "+e.y+"px, 0)",s.style.transform="scale("+i+", "+i+")"}for(var r=0;r<a.length;r+1){var c=a[r],u=r+1===w.currentPageId?"block":"none";c.style.display=u}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.currentPageId,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.currentViewId;w.currentPageId!==e&&(k(),ga("send","event","Comic","page",e)),w.currentPageId=e,w.currentViewId=t,v=h[w.currentPageId-1].views,p=v[w.currentViewId-1],y=v.length,x(),L(),b(w.currentPageId+1),b(w.currentPageId-1)},S=function(){var e=window.location.hash.substring(1).split("-"),t=Number(e[0])||1,n=Number(e[1])||1,i=!1;h&&(h[t-1]||(t=h.length,i=!0),h[t-1].views[n-1]||(n=h[t-1].views.length,i=!0)),i?window.location.hash="#"+t+"-"+n:V(t,n)},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!w.dynamicViews;w.dynamicViews=e,w.dynamicViews?(d.classList.add("is-active"),c.classList.add("c-comic--theater"),t("dynamicViewsState",1)):(o.removeAttribute("style"),s.removeAttribute("style"),d.classList.remove("is-active"),c.classList.remove("c-comic--theater"),t("dynamicViewsState",0)),I(),V(),ga&&i()&&ga("send","event","UX","dynamicViews",w.dynamicViews)},F=function(e){e.preventDefault(),S()},P=function(){Modernizr.fullscreen&&(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),w.fullscreen=!w.fullscreen,ga&&ga("send","event","UX","fullscreen",w.fullscreen))},E=function(){var e=37,t=39,n=32;document.body.onkeydown=function(i){i.keyCode===e?(i.preventDefault(),u&&u[0].click()):i.keyCode!==t&&i.keyCode!==n||(i.preventDefault(),l&&l[0].click())}},A=function(){if(c){I(),h=comicData,r(f,function(e,t){var n=t.getAttribute("data-src");w.images[e+1]={src:n,node:t}}),S(),b(w.currentPageId),E(),d.addEventListener("click",function(){q()},!1),Modernizr.fullscreen&&m.addEventListener("click",function(){q(!1),P()},!1),window.addEventListener("hashchange",F,!1),window.addEventListener("resize",function(){I(),L()},!1);var e=new Hammer(c);e.on("swiperight",function(){u[0].click()}),e.on("swipeleft tap",function(){l[0].click()}),"1"!==n("dynamicViewsState")&&i()||q(!0),window.requestAnimationFrame(function(){w.active=!0,c.classList.remove("is-loading")})}};return{state:w,init:A}},s=document.querySelector(".js-comic");s&&(window.mainComic=c(s),mainComic.init()),document.querySelector(".js-share-facebook").addEventListener("click",function(){FB.ui({method:"share",href:URL}),ga&&ga("send","event","Social","facebook")}),document.querySelector(".js-share-twitter").addEventListener("click",function(){ga&&ga("send","event","Social","twitter")})}(jQuery)}]);